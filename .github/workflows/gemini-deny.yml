# ðŸ›‘ Gemini Deny Workflow (No-op)
#
# Triggered by: Comment "/deny" on an issue or PR
# Intentionally performs no mutations (does not close, relabel, or comment).
#
# Documentation: .github/GEMINI_WORKFLOWS.md

name: Gemini Deny (No-op)

on:
  issue_comment:
    types: [created]

permissions:
  contents: read

concurrency:
  group: gemini-deny-${{ github.event.issue.number }}
  cancel-in-progress: true

jobs:
  deny:
    if: |
      startsWith(github.event.comment.body, '/deny') || startsWith(github.event.comment.body, '@gemini-cli /deny')
    runs-on: ubuntu-latest

    steps:
      - name: Permission gate
        uses: actions/github-script@v7
        with:
          script: |
            const assoc = context.payload.comment.author_association;
            const allowed = ['OWNER','MEMBER','COLLABORATOR'];
            if (!allowed.includes(assoc)) {
              core.setFailed(`Not allowed: author_association=${assoc}`);
            }

      - name: No-op
        run: echo "/deny received; no action taken."
